<!DOCTYPE html>
<html>
  
<head>
    
<meta charset="utf-8">
    
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    
<title>signalr</title>
    
<link href='https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons' rel="stylesheet" type="text/css">
      

</head>
  
<body>
    
<div id="app">
            <input type="text" v-model="name"></v-text-field>
            <input type="text" v-model="message"></v-text-field>
            <button @click="send()">Send</button>
            <div v-for="(m, i) in messages" :key="i">
              {{m.name}}: {{m.message}}
            </div>
</div>
    
<script src="http://localhost:35679/jquery.js" ></script>
    
<!--Reference the SignalR library. -->
    
<script src="http://localhost:35679/jquery.signalR-2.2.2.min.js">
</script>
    
<!--Reference the autogenerated SignalR hub script. -->
    
<script src="http://localhost:35679/signalr/hubs"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.4.2/vue.js"></script>
<script>
new Vue({
  el: '#app',
data: function () {
    return {
      name: null,
      message: null,
      chat: null,
      messages: []
    }
  },
  created () {
    var vm = this
$.connection.hub.url = 'http://localhost:35679/signalr';
    this.chat = $.connection.chatHub
    this.chat.client.broadcastMessage = function (name, message) {
      vm.broadcast(name, message)
    }
    this.chat.client.send = function (to, from, message) {
      vm.broadcast(from, message)
    };
    $.connection.hub.start()
  },
  methods: {
    send: function () {
      this.chat.server.send(this.name, this.message)
    },
    broadcast: function (name, message) {
      this.messages.push({name: name, message: message})
    }
  }

})
</script>
</body>
</html>
